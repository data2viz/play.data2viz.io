!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){},function(e,t,n){e.exports=n.p+"images/logo-play.png"},function(e,t,n){e.exports=n.p+"images/logo-negative.png"},function(e,t,n){e.exports=n.p+"images/go-back-to-main-page.png"},function(e,t,n){e.exports=n.p+"images/logo-play-io_all_min-color_variation-v3.png"},function(e,t,n){"use strict";function o(e){let t=!1;window.addEventListener("scroll",n=>{t||window.requestAnimationFrame(()=>{e(),t=!1}),t=!0})}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}var r;function s(e){let t=!0;for(const n of e)n.isActive&&t?(t=!1,n.classname="active"):n.classname="unactive"}n.r(t),function(e){e.CODE_AREA=".code-area",e.CONTENT="#d2v-content",e.CURRENT_SECTION_NAME="#current-section-name",e.TOP_HEADER="#d2v-header",e.NAVIGATION_MENU="#site-navigation"}(r||(r={}));class c{constructor(e,t){this._element=e,this._elementInMenu=this.getElementInMenu(t)}get isActive(){return this._element.getBoundingClientRect().top<=window.innerHeight/2}set classname(e){"active"===e?this._elementInMenuContainsActiveClass||this._elementInMenu.classList.add("active"):this._elementInMenuContainsActiveClass&&this._elementInMenu.classList.remove("active")}getElementInMenu(e){const t=document.querySelectorAll(`${r.NAVIGATION_MENU} > li > ul > li > a`);for(const e of t)if(e.getAttribute("href")==="#"+this._element.getAttribute("id"))return e}get _elementInMenuContainsActiveClass(){return void 0!==this._elementInMenu&&this._elementInMenu.classList.contains("active")}}class u{constructor(e){this._editors=[],this._editors=e,this._setListenerForEditorsAutoExecution()}runVisibleEditors(){for(const e of this._editors)e.isOnScreen&&e.hasNotBeenExecuted&&e.execute()}_setListenerForEditorsAutoExecution(){o(()=>{this.runVisibleEditors()})}}function l(e,t,n){const o=document.createElement(e);if("string"==typeof t)o.innerHTML=t;else if(t)for(const e of t)o.appendChild(e);return n&&(o.className=n),o}class a{constructor(e){this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME="more-than-once-code-changed",this.SHORTCUT_INFO_CLASSNAME="shortcut-info compiler-info",this._hasBeenExecuted=!1,this._eventFunctions={getInstance:e=>{this._KotlinPlaygroundEditor=e},onChange:e=>{this.changedCounter++,2===this.changedCounter&&this.kotlinEditorContainer&&(this.kotlinEditorContainer.appendChild(l("div",[l("div","Windows: CTRL + F9 / MacOS: CTRL + R : run"),l("div","CTRL + SPACE : code completion")],this.SHORTCUT_INFO_CLASSNAME)),this.kotlinEditorContainer.classList.add(this.MORE_THAN_ONCE_CODE_CHANGED_CLASSNAME))}},this.changedCounter=0,this._selector=e}init(){return new Promise(e=>{KotlinPlayground(this._selector,this._eventFunctions).then(()=>{if(this._KotlinPlaygroundEditor){this._kotlinEditorContainer=this._KotlinPlaygroundEditor.nodes[0];const e=this._kotlinEditorContainer.querySelector(r.CODE_AREA);if(null!==e&&e instanceof HTMLElement){this._codeArea=e;const t=e.querySelector(".CodeMirror"),n=a.getCookie("theme");n&&t.classList.add(`cm-s-${n}`)}}e(this)})})}static getCookie(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null}get kotlinEditorContainer(){return this._kotlinEditorContainer}get codeArea(){return this._codeArea}get bottom_of_codeArea_is_above_bottom_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom>=0}get bottom_of_codeArea_is_below_top_of_screen(){return!!this.codeArea&&this.codeArea.getBoundingClientRect().bottom<=window.innerHeight}get hasNotBeenExecuted(){return!this._hasBeenExecuted}get isOnScreen(){if(this._KotlinPlaygroundEditor)return this.bottom_of_codeArea_is_above_bottom_of_screen&&this.bottom_of_codeArea_is_below_top_of_screen}execute(){return new Promise((e,t)=>{this._KotlinPlaygroundEditor&&(this._hasBeenExecuted=!0,this._KotlinPlaygroundEditor.execute()),e(),t(new Error("can't execute kotlin playground editor"))})}}new Promise(e=>{const t=document.querySelectorAll(".kotlin-code"),n=[];let o=0;for(const e of t)e instanceof HTMLElement&&n.push(new a(e));for(const t of n)t.init().then(()=>{++o===n.length&&e(new u(n))})}).then(e=>{e.runVisibleEditors()}),function(e,t){const n=document.body,r=void 0===t?0:t.getBoundingClientRect().height;o(()=>{const t=parseInt(window.getComputedStyle(e).paddingTop)-r;i()>=t&&!n.classList.contains("menu-fixed")?n.classList.add("menu-fixed"):i()<=t&&n.classList.contains("menu-fixed")&&n.classList.remove("menu-fixed")})}(document.querySelector(r.CONTENT),document.querySelector(r.TOP_HEADER)),document.querySelector(r.CURRENT_SECTION_NAME).innerHTML=function(){const e=document.querySelector("h1");return null!==e?e.innerHTML:""}(),new Promise((e,t)=>{const n=[],o=document.querySelectorAll(`${r.CONTENT} h2`),i=document.querySelector(`${r.NAVIGATION_MENU}`);for(const e of o)n.push(new c(e,i));e(n.reverse()),t(new Error("can't get list of level two in navigation menu"))}).then(e=>{s(e),o(()=>{s(e)})});n(0),n(1),n(2),n(3),n(4)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXkucG5nIiwid2VicGFjazovLy8uL3NyYy9pbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9nby1iYWNrLXRvLW1haW4tcGFnZS5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2ltYWdlcy9sb2dvLXBsYXktaW9fYWxsX21pbi1jb2xvcl92YXJpYXRpb24tdjMucG5nIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2FkZFNjcm9sbEV2ZW50TGlzdGVuZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL0hUTUxfU0VMRUNUT1JTLnRzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL25hdmlnYXRpb24vc2V0TmF2aWdhdGlvbk1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvck1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZWRpdG9yL0VkaXRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9lZGl0b3Ivc2V0RWRpdG9yc01hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9uYXZpZ2F0aW9uL3NldE1lbnVQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9uYXZpZ2F0aW9uL3NldEN1cnJlbnRTZWN0aW9uTmFtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImFkZFNjcm9sbEV2ZW50TGlzdGVuZXIiLCJmdW4iLCJ0aWNraW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wIiwidW5kZWZpbmVkIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJwYXJlbnROb2RlIiwic2Nyb2xsVG9wIiwiSFRNTF9TRUxFQ1RPUlMiLCJ1cGRhdGVDaGFwdGVyU3RhdHVJbk5hdmlnYXRpb25NZW51IiwibGlzdE9mVGl0bGVMZXZlbFR3byIsImxhc3RUaXRsZUlzTm90Rm91bmQiLCJ0aXRsZUxldmVsVHdvIiwiaXNBY3RpdmUiLCJjbGFzc25hbWUiLCJzZXROYXZpZ2F0aW9uTWVudV9DaGFwdGVyIiwiW29iamVjdCBPYmplY3RdIiwiZWxlbWVudCIsIm5hdmlnYXRpb25NZW51RWxlbWVudCIsInRoaXMiLCJfZWxlbWVudCIsIl9lbGVtZW50SW5NZW51IiwiZ2V0RWxlbWVudEluTWVudSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImlubmVySGVpZ2h0IiwiX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibGlzdE9mTGV2ZWxUd29Jbk1lbnUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiTkFWSUdBVElPTl9NRU5VIiwibGV2ZWxUd29FbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiY29udGFpbnMiLCJFZGl0b3JNYW5hZ2VyX0VkaXRvck1hbmFnZXIiLCJrb3RsaW5FZGl0b3JzIiwiX2VkaXRvcnMiLCJfc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbiIsImVkaXRvciIsImlzT25TY3JlZW4iLCJoYXNOb3RCZWVuRXhlY3V0ZWQiLCJleGVjdXRlIiwicnVuVmlzaWJsZUVkaXRvcnMiLCJjcmVhdGVIVE1MRWxlbWVudCIsInRhZ05hbWUiLCJjb250ZW50IiwibmV3RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJodG1sRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY2xhc3NOYW1lIiwiRWRpdG9yX0VkaXRvciIsInNlbGVjdG9yIiwiTU9SRV9USEFOX09OQ0VfQ09ERV9DSEFOR0VEX0NMQVNTTkFNRSIsIlNIT1JUQ1VUX0lORk9fQ0xBU1NOQU1FIiwiX2hhc0JlZW5FeGVjdXRlZCIsIl9ldmVudEZ1bmN0aW9ucyIsImdldEluc3RhbmNlIiwiX0tvdGxpblBsYXlncm91bmRFZGl0b3IiLCJvbkNoYW5nZSIsImNvZGUiLCJjaGFuZ2VkQ291bnRlciIsImtvdGxpbkVkaXRvckNvbnRhaW5lciIsIl9zZWxlY3RvciIsIlByb21pc2UiLCJyZXNvbHZlIiwiS290bGluUGxheWdyb3VuZCIsInRoZW4iLCJfa290bGluRWRpdG9yQ29udGFpbmVyIiwibm9kZXMiLCJjb2RlQXJlYSIsInF1ZXJ5U2VsZWN0b3IiLCJDT0RFX0FSRUEiLCJIVE1MRWxlbWVudCIsIl9jb2RlQXJlYSIsImNvZGVNaXJyb3JTdHlsZUVsZW1lbnQiLCJlZGl0b3JUaGVtZUNsYXNzbmFtZSIsImdldENvb2tpZSIsIm1hdGNoIiwiY29va2llIiwiUmVnRXhwIiwiYm90dG9tX29mX2NvZGVBcmVhX2lzX2Fib3ZlX2JvdHRvbV9vZl9zY3JlZW4iLCJib3R0b20iLCJib3R0b21fb2ZfY29kZUFyZWFfaXNfYmVsb3dfdG9wX29mX3NjcmVlbiIsInJlamVjdCIsIkVycm9yIiwiY29kZUVsZW1lbnRzRm9yS290bGluUGxheWdyb3VuZEVkaXRvckluaXQiLCJsaXN0T2ZFZGl0b3IiLCJudW1iZXJPZkVkaXRvcnNJbml0aWFsaXNlZCIsImNvZGVFbGVtZW50IiwicHVzaCIsImluaXQiLCJsZW5ndGgiLCJlZGl0b3JNYW5hZ2VyIiwicmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudSIsInRvcEVsZW1lbnRGaXhlZE92ZXJNZW51IiwiaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51IiwiaGVpZ2h0IiwicmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5nVG9wIiwic2V0TWVudVBvc2l0aW9uIiwiQ09OVEVOVCIsIlRPUF9IRUFERVIiLCJDVVJSRU5UX1NFQ1RJT05fTkFNRSIsInBhZ2VUaXRsZUVsZW1lbnQiLCJnZXRDdXJyZW50U2VjdGlvbk5hbWUiLCJsaXN0VG9SZXR1cm4iLCJUSVRMRV9UV09fRUxFTUVOVFMiLCJOQVZJR0FUSU9OX01FTlVfRUxFTUVOVCIsIm5hdmlnYXRpb25Ud29FbGVtZW50IiwicmV2ZXJzZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0Is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OlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tcGxheS5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvbG9nby1uZWdhdGl2ZS5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWFnZXMvZ28tYmFjay10by1tYWluLXBhZ2UucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2xvZ28tcGxheS1pb19hbGxfbWluLWNvbG9yX3ZhcmlhdGlvbi12My5wbmdcIjsiLCJleHBvcnQgZnVuY3Rpb24gYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcihmdW46ICgpID0+IHZvaWQpIHtcbiAgICBsZXQgdGlja2luZyA9IGZhbHNlXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKGV2KSA9PiB7XG4gICAgICAgIGlmKCF0aWNraW5nKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBmdW4oKVxuICAgICAgICAgICAgICAgIHRpY2tpbmcgPSBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aWNraW5nID0gdHJ1ZVxuICAgIH0pXG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh3aW5kb3cucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZCkgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSkgYXMgSFRNTEVsZW1lbnQpLnNjcm9sbFRvcFxufSIsImV4cG9ydCBlbnVtIEhUTUxfU0VMRUNUT1JTIHtcbiAgICBDT0RFX0FSRUEgICAgICAgICAgICAgICA9IFwiLmNvZGUtYXJlYVwiLFxuICAgIENPTlRFTlQgICAgICAgICAgICAgICAgID0gXCIjZDJ2LWNvbnRlbnRcIixcbiAgICBDVVJSRU5UX1NFQ1RJT05fTkFNRSAgICA9IFwiI2N1cnJlbnQtc2VjdGlvbi1uYW1lXCIsXG4gICAgVE9QX0hFQURFUiAgICAgICAgICAgICAgPSBcIiNkMnYtaGVhZGVyXCIsXG4gICAgTkFWSUdBVElPTl9NRU5VICAgICAgICAgPSBcIiNzaXRlLW5hdmlnYXRpb25cIlxufSIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5pbXBvcnQge2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJ9IGZyb20gXCIuLi9hZGRTY3JvbGxFdmVudExpc3RlbmVyXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNldE5hdmlnYXRpb25NZW51KCkge1xuICAgIGdlbmVyYXRlTGlzdE9mQ2hhcHRlcigpLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIHVwZGF0ZUNoYXB0ZXJTdGF0dUluTmF2aWdhdGlvbk1lbnUodmFsdWUpXG5cbiAgICAgICAgYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVDaGFwdGVyU3RhdHVJbk5hdmlnYXRpb25NZW51KHZhbHVlKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoYXB0ZXJTdGF0dUluTmF2aWdhdGlvbk1lbnUobGlzdE9mVGl0bGVMZXZlbFR3bzogQ2hhcHRlcltdKSB7XG4gICAgbGV0IGxhc3RUaXRsZUlzTm90Rm91bmQgPSB0cnVlXG5cbiAgICBmb3IoY29uc3QgdGl0bGVMZXZlbFR3byBvZiBsaXN0T2ZUaXRsZUxldmVsVHdvKSB7XG4gICAgICAgIGlmKHRpdGxlTGV2ZWxUd28uaXNBY3RpdmUgJiYgbGFzdFRpdGxlSXNOb3RGb3VuZCkge1xuICAgICAgICAgICAgbGFzdFRpdGxlSXNOb3RGb3VuZCA9IGZhbHNlXG4gICAgICAgICAgICB0aXRsZUxldmVsVHdvLmNsYXNzbmFtZSA9IFwiYWN0aXZlXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpdGxlTGV2ZWxUd28uY2xhc3NuYW1lID0gXCJ1bmFjdGl2ZVwiXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTGlzdE9mQ2hhcHRlcigpOiBQcm9taXNlPENoYXB0ZXJbXT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RUb1JldHVybiA9IFtdXG5cbiAgICAgICAgY29uc3QgVElUTEVfVFdPX0VMRU1FTlRTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtIVE1MX1NFTEVDVE9SUy5DT05URU5UfSBoMmApIGFzIE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+XG4gICAgICAgIGNvbnN0IE5BVklHQVRJT05fTUVOVV9FTEVNRU5UID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtIVE1MX1NFTEVDVE9SUy5OQVZJR0FUSU9OX01FTlV9YCkgYXMgSFRNTEVsZW1lbnRcblxuICAgICAgICBmb3IoY29uc3QgbmF2aWdhdGlvblR3b0VsZW1lbnQgb2YgVElUTEVfVFdPX0VMRU1FTlRTKSB7XG4gICAgICAgICAgICBsaXN0VG9SZXR1cm4ucHVzaChuZXcgQ2hhcHRlcihuYXZpZ2F0aW9uVHdvRWxlbWVudCwgTkFWSUdBVElPTl9NRU5VX0VMRU1FTlQpKVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZShsaXN0VG9SZXR1cm4ucmV2ZXJzZSgpKVxuXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJjYW4ndCBnZXQgbGlzdCBvZiBsZXZlbCB0d28gaW4gbmF2aWdhdGlvbiBtZW51XCIpKVxuICAgIH0pXG59XG5cbmNsYXNzIENoYXB0ZXIge1xuICAgIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50XG5cbiAgICBwcml2YXRlIF9lbGVtZW50SW5NZW51OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZFxuXG4gICAgY29uc3RydWN0b3IoZWxlbWVudDogSFRNTEVsZW1lbnQsIG5hdmlnYXRpb25NZW51RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnRcbiAgICAgICAgdGhpcy5fZWxlbWVudEluTWVudSA9IHRoaXMuZ2V0RWxlbWVudEluTWVudShuYXZpZ2F0aW9uTWVudUVsZW1lbnQpXG4gICAgfVxuXG4gICAgZ2V0IGlzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPD0gd2luZG93LmlubmVySGVpZ2h0IC8gMlxuICAgIH1cblxuICAgIHNldCBjbGFzc25hbWUoY2xhc3NuYW1lOiBcImFjdGl2ZVwifFwidW5hY3RpdmVcIikge1xuICAgICAgICBpZihjbGFzc25hbWUgPT09IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgICAgIGlmKCEgdGhpcy5fZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAodGhpcy5fZWxlbWVudEluTWVudSBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYodGhpcy5fZWxlbWVudEluTWVudUNvbnRhaW5zQWN0aXZlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAodGhpcy5fZWxlbWVudEluTWVudSBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRFbGVtZW50SW5NZW51KG5hdmlnYXRpb25NZW51RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgbGlzdE9mTGV2ZWxUd29Jbk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke0hUTUxfU0VMRUNUT1JTLk5BVklHQVRJT05fTUVOVX0gPiBsaSA+IHVsID4gbGkgPiBhYCkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5cblxuICAgICAgICBmb3IoY29uc3QgbGV2ZWxUd29FbGVtZW50IG9mIGxpc3RPZkxldmVsVHdvSW5NZW51KSB7XG4gICAgICAgICAgICBpZihsZXZlbFR3b0VsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgKyB0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxldmVsVHdvRWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgX2VsZW1lbnRJbk1lbnVDb250YWluc0FjdGl2ZUNsYXNzKCkge1xuICAgICAgICBpZih0aGlzLl9lbGVtZW50SW5NZW51ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50SW5NZW51LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0tvdGxpblBsYXlncm91bmR9IGZyb20gXCIuL0tvdGxpblBsYXlncm91bmRcIlxuaW1wb3J0IHtFZGl0b3J9IGZyb20gXCIuL0VkaXRvclwiXG5pbXBvcnQge2FkZFNjcm9sbEV2ZW50TGlzdGVuZXJ9IGZyb20gXCIuLi9hZGRTY3JvbGxFdmVudExpc3RlbmVyXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5cbmV4cG9ydCBjbGFzcyBFZGl0b3JNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihrb3RsaW5FZGl0b3JzOiBFZGl0b3JbXSkge1xuXG4gICAgICAgIHRoaXMuX2VkaXRvcnMgPSBrb3RsaW5FZGl0b3JzXG5cbiAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJGb3JFZGl0b3JzQXV0b0V4ZWN1dGlvbigpXG4gICAgfVxuXG4gICAgcHVibGljIHJ1blZpc2libGVFZGl0b3JzKCkge1xuICAgICAgICBmb3IoY29uc3QgZWRpdG9yIG9mIHRoaXMuX2VkaXRvcnMpIHtcbiAgICAgICAgICAgIGlmKGVkaXRvci5pc09uU2NyZWVuICYmIGVkaXRvci5oYXNOb3RCZWVuRXhlY3V0ZWQpIHtcbiAgICAgICAgICAgICAgICBlZGl0b3IuZXhlY3V0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9lZGl0b3JzOiBFZGl0b3JbXSA9IFtdXG5cbiAgICBwcml2YXRlIF9zZXRMaXN0ZW5lckZvckVkaXRvcnNBdXRvRXhlY3V0aW9uKCkge1xuICAgICAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucnVuVmlzaWJsZUVkaXRvcnMoKVxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIVE1MRWxlbWVudCh0YWdOYW1lOiBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXAsIGNvbnRlbnQ/OiBzdHJpbmcgfCBIVE1MRWxlbWVudFtdLCBjbGFzc25hbWU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKVxuXG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG5ld0VsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudFxuICAgIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgICAgICBmb3IoY29uc3QgaHRtbEVsZW1lbnQgb2YgY29udGVudCkge1xuICAgICAgICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChodG1sRWxlbWVudClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmKGNsYXNzbmFtZSkgbmV3RWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc25hbWVcblxuICAgIHJldHVybiBuZXdFbGVtZW50XG59IiwiaW1wb3J0IHtLb3RsaW5QbGF5Z3JvdW5kfSBmcm9tIFwiLi9Lb3RsaW5QbGF5Z3JvdW5kXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5pbXBvcnQge2NyZWF0ZUhUTUxFbGVtZW50fSBmcm9tIFwiLi4vdG9vbHNcIlxuXG5kZWNsYXJlIGZ1bmN0aW9uIEtvdGxpblBsYXlncm91bmQoc2VsZWN0b3I6IHN0cmluZyB8wqBIVE1MRWxlbWVudCwgZXZlbnRGdW5jdGlvbnM/OiBLb3RsaW5QbGF5Z3JvdW5kLklFdmVudEZ1bmN0aW9ucyk6IFByb21pc2U8S290bGluUGxheWdyb3VuZC5JRWRpdG9yW10+XG5cbmV4cG9ydCBjbGFzcyBFZGl0b3Ige1xuICAgIHByaXZhdGUgTU9SRV9USEFOX09OQ0VfQ09ERV9DSEFOR0VEX0NMQVNTTkFNRSA9IFwibW9yZS10aGFuLW9uY2UtY29kZS1jaGFuZ2VkXCJcbiAgICBwcml2YXRlIFNIT1JUQ1VUX0lORk9fQ0xBU1NOQU1FID0gXCJzaG9ydGN1dC1pbmZvIGNvbXBpbGVyLWluZm9cIlxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHNlbGVjdG9yOiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcbiAgICApIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvclxuICAgIH1cblxuICAgIHByaXZhdGUgX3NlbGVjdG9yOiBzdHJpbmcgfCBIVE1MRWxlbWVudFxuXG4gICAgcHVibGljIGluaXQoKTogUHJvbWlzZTxFZGl0b3I+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgS290bGluUGxheWdyb3VuZCh0aGlzLl9zZWxlY3RvciwgdGhpcy5fZXZlbnRGdW5jdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3IpIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rb3RsaW5FZGl0b3JDb250YWluZXIgPSB0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yLm5vZGVzWzBdXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29kZUFyZWEgPSB0aGlzLl9rb3RsaW5FZGl0b3JDb250YWluZXIucXVlcnlTZWxlY3RvcihIVE1MX1NFTEVDVE9SUy5DT0RFX0FSRUEpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY29kZUFyZWEgIT09IG51bGwgJiYgY29kZUFyZWEgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29kZUFyZWEgPSBjb2RlQXJlYVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlTWlycm9yU3R5bGVFbGVtZW50ID0gY29kZUFyZWEucXVlcnlTZWxlY3RvcihcIi5Db2RlTWlycm9yXCIpIGFzIEhUTUxEaXZFbGVtZW50XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvclRoZW1lQ2xhc3NuYW1lID0gRWRpdG9yLmdldENvb2tpZShcInRoZW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWRpdG9yVGhlbWVDbGFzc25hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlTWlycm9yU3R5bGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoYGNtLXMtJHtlZGl0b3JUaGVtZUNsYXNzbmFtZX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSggdGhpcyApXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGdldENvb2tpZShuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58ICknICsgbmFtZSArICc9KFteO10rKScpKTtcblxuICAgICAgICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaFsyXTtcbiAgICAgICAgZWxzZSByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHByaXZhdGUgX2tvdGxpbkVkaXRvckNvbnRhaW5lcj86IEhUTUxFbGVtZW50XG4gICAgZ2V0IGtvdGxpbkVkaXRvckNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tvdGxpbkVkaXRvckNvbnRhaW5lclxuICAgIH1cblxuICAgIHByaXZhdGUgX2NvZGVBcmVhPzogSFRNTEVsZW1lbnRcbiAgICBwdWJsaWMgZ2V0IGNvZGVBcmVhKCkge3JldHVybiB0aGlzLl9jb2RlQXJlYX1cblxuICAgIHB1YmxpYyBnZXQgYm90dG9tX29mX2NvZGVBcmVhX2lzX2Fib3ZlX2JvdHRvbV9vZl9zY3JlZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvZGVBcmVhID8gdGhpcy5jb2RlQXJlYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPj0gMCA6IGZhbHNlXG4gICAgfVxuICAgIHB1YmxpYyBnZXQgYm90dG9tX29mX2NvZGVBcmVhX2lzX2JlbG93X3RvcF9vZl9zY3JlZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvZGVBcmVhID8gdGhpcy5jb2RlQXJlYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gd2luZG93LmlubmVySGVpZ2h0IDogZmFsc2VcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYXNCZWVuRXhlY3V0ZWQgPSBmYWxzZVxuICAgIHB1YmxpYyBnZXQgaGFzTm90QmVlbkV4ZWN1dGVkKCkgeyByZXR1cm4gIXRoaXMuX2hhc0JlZW5FeGVjdXRlZH1cblxuICAgIHB1YmxpYyBnZXQgaXNPblNjcmVlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX0tvdGxpblBsYXlncm91bmRFZGl0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdHRvbV9vZl9jb2RlQXJlYV9pc19hYm92ZV9ib3R0b21fb2Zfc2NyZWVuICYmIHRoaXMuYm90dG9tX29mX2NvZGVBcmVhX2lzX2JlbG93X3RvcF9vZl9zY3JlZW5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBleGVjdXRlKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiggdGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0JlZW5FeGVjdXRlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB0aGlzLl9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yLmV4ZWN1dGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiY2FuJ3QgZXhlY3V0ZSBrb3RsaW4gcGxheWdyb3VuZCBlZGl0b3JcIikpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2V2ZW50RnVuY3Rpb25zOiBLb3RsaW5QbGF5Z3JvdW5kLklFdmVudEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgZ2V0SW5zdGFuY2U6IChlZGl0b3I6IEtvdGxpblBsYXlncm91bmQuSUVkaXRvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fS290bGluUGxheWdyb3VuZEVkaXRvciA9IGVkaXRvclxuICAgICAgICB9LFxuICAgICAgICBvbkNoYW5nZTogKGNvZGU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkQ291bnRlcisrXG5cbiAgICAgICAgICAgIGlmKHRoaXMuY2hhbmdlZENvdW50ZXIgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmtvdGxpbkVkaXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtvdGxpbkVkaXRvckNvbnRhaW5lci5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUxFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVIVE1MRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIldpbmRvd3M6IENUUkwgKyBGOSAvIE1hY09TOiBDVFJMICsgUiA6IHJ1blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUxFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ1RSTCArIFNQQUNFIDogY29kZSBjb21wbGV0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5TSE9SVENVVF9JTkZPX0NMQVNTTkFNRVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rb3RsaW5FZGl0b3JDb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLk1PUkVfVEhBTl9PTkNFX0NPREVfQ0hBTkdFRF9DTEFTU05BTUUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG5cbiAgICBwcml2YXRlIF9Lb3RsaW5QbGF5Z3JvdW5kRWRpdG9yPzogS290bGluUGxheWdyb3VuZC5JRWRpdG9yXG5cbiAgICBwcml2YXRlIGNoYW5nZWRDb3VudGVyID0gMFxufSIsImltcG9ydCB7S290bGluUGxheWdyb3VuZH0gZnJvbSBcIi4vS290bGluUGxheWdyb3VuZFwiXG5pbXBvcnQge0VkaXRvck1hbmFnZXJ9IGZyb20gXCIuL0VkaXRvck1hbmFnZXJcIlxuaW1wb3J0IHtFZGl0b3J9IGZyb20gXCIuL0VkaXRvclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRFZGl0b3JzTWFuYWdlcigpOiBQcm9taXNlPEVkaXRvck1hbmFnZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGVFbGVtZW50c0ZvcktvdGxpblBsYXlncm91bmRFZGl0b3JJbml0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmtvdGxpbi1jb2RlJylcblxuICAgICAgICBjb25zdCBsaXN0T2ZFZGl0b3I6IEVkaXRvcltdID0gW11cblxuICAgICAgICBsZXQgbnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQgPSAwXG5cbiAgICAgICAgZm9yKGNvbnN0IGNvZGVFbGVtZW50IG9mIGNvZGVFbGVtZW50c0ZvcktvdGxpblBsYXlncm91bmRFZGl0b3JJbml0KSB7XG4gICAgICAgICAgICBpZihjb2RlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgbGlzdE9mRWRpdG9yLnB1c2gobmV3IEVkaXRvcihjb2RlRWxlbWVudCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IoY29uc3QgZWRpdG9yIG9mIGxpc3RPZkVkaXRvcikge1xuICAgICAgICAgICAgZWRpdG9yLmluaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBudW1iZXJPZkVkaXRvcnNJbml0aWFsaXNlZCsrXG4gICAgICAgICAgICAgICAgaWYobnVtYmVyT2ZFZGl0b3JzSW5pdGlhbGlzZWQgPT09IGxpc3RPZkVkaXRvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFZGl0b3JNYW5hZ2VyKGxpc3RPZkVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufVxuIiwiaW1wb3J0IHtzZXRNZW51UG9zaXRpb259IGZyb20gXCIuL25hdmlnYXRpb24vc2V0TWVudVBvc2l0aW9uXCJcbmltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuL0hUTUxfU0VMRUNUT1JTXCJcbmltcG9ydCB7c2V0Q3VycmVudFNlY3Rpb25OYW1lfSBmcm9tIFwiLi9uYXZpZ2F0aW9uL3NldEN1cnJlbnRTZWN0aW9uTmFtZVwiXG5pbXBvcnQge3NldE5hdmlnYXRpb25NZW51fSBmcm9tIFwiLi9uYXZpZ2F0aW9uL3NldE5hdmlnYXRpb25NZW51XCJcbmltcG9ydCB7c2V0RWRpdG9yc01hbmFnZXJ9IGZyb20gXCIuL2VkaXRvci9zZXRFZGl0b3JzTWFuYWdlclwiXG5cbnNldEVkaXRvcnNNYW5hZ2VyKCkudGhlbigoZWRpdG9yTWFuYWdlcikgPT4ge1xuICAgIGVkaXRvck1hbmFnZXIucnVuVmlzaWJsZUVkaXRvcnMoKVxufSlcblxuc2V0TWVudVBvc2l0aW9uKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ09OVEVOVCkgYXMgSFRNTEVsZW1lbnQsXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihIVE1MX1NFTEVDVE9SUy5UT1BfSEVBREVSKSBhcyBIVE1MRWxlbWVudCxcbilcblxuXG5zZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxuXG5zZXROYXZpZ2F0aW9uTWVudSgpIiwiaW1wb3J0IHthZGRTY3JvbGxFdmVudExpc3RlbmVyfSBmcm9tIFwiLi4vYWRkU2Nyb2xsRXZlbnRMaXN0ZW5lclwiXG5pbXBvcnQge2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcH0gZnJvbSBcIi4uL2dldFBhZ2VTY3JvbGxQb3NpdGlvblRvcFwiXG5pbXBvcnQge0hUTUxfU0VMRUNUT1JTfSBmcm9tIFwiLi4vSFRNTF9TRUxFQ1RPUlNcIlxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNZW51UG9zaXRpb24ocmVmZXJlbmNlRWxlbWVudEZvckZpeGVkTWVudTogSFRNTEVsZW1lbnQsIHRvcEVsZW1lbnRGaXhlZE92ZXJNZW51PzogSFRNTEVsZW1lbnQpIHtcblxuICAgIGNvbnN0IEZJWEVEX01FTlVfQ0xBU1NfTkFNRSA9IFwibWVudS1maXhlZFwiXG5cbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keVxuXG4gICAgY29uc3QgaGVpZ2h0T2ZGaXhlZEVsZW1lbnRUaGF0SGlkZXNNZW51ID0gdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUgPT09IHVuZGVmaW5lZCA/ICAwIDogdG9wRWxlbWVudEZpeGVkT3Zlck1lbnUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG5cbiAgICBhZGRTY3JvbGxFdmVudExpc3RlbmVyKCgpID0+IHtcblxuICAgICAgICBjb25zdCBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCA9IHBhcnNlSW50KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShyZWZlcmVuY2VFbGVtZW50Rm9yRml4ZWRNZW51KS5wYWRkaW5nVG9wIGFzIHN0cmluZyApXG5cbiAgICAgICAgY29uc3QgcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgPSBwb3NpdGlvblRvcE9mUmVmRWxlbWVudCAtIGhlaWdodE9mRml4ZWRFbGVtZW50VGhhdEhpZGVzTWVudVxuXG4gICAgICAgIGlmKGdldFBhZ2VTY3JvbGxQb3NpdGlvblRvcCgpID49IHJlZlBvc2l0aW9uRm9yRml4ZWRNZW51ICYmICFib2R5LmNsYXNzTGlzdC5jb250YWlucyhGSVhFRF9NRU5VX0NMQVNTX05BTUUpKXtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZChGSVhFRF9NRU5VX0NMQVNTX05BTUUpXG4gICAgICAgIH0gZWxzZSBpZiAoZ2V0UGFnZVNjcm9sbFBvc2l0aW9uVG9wKCkgPD0gcmVmUG9zaXRpb25Gb3JGaXhlZE1lbnUgJiYgYm9keS5jbGFzc0xpc3QuY29udGFpbnMoRklYRURfTUVOVV9DTEFTU19OQU1FKSkge1xuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKEZJWEVEX01FTlVfQ0xBU1NfTkFNRSlcbiAgICAgICAgfVxuXG4gICAgfSlcbn1cbiIsImltcG9ydCB7SFRNTF9TRUxFQ1RPUlN9IGZyb20gXCIuLi9IVE1MX1NFTEVDVE9SU1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U2VjdGlvbk5hbWUoKSB7XG4gICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoSFRNTF9TRUxFQ1RPUlMuQ1VSUkVOVF9TRUNUSU9OX05BTUUpIGFzIEhUTUxFbGVtZW50KS5pbm5lckhUTUwgPSBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50U2VjdGlvbk5hbWUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYWdlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImgxXCIpXG4gICAgaWYocGFnZVRpdGxlRWxlbWVudCAhPT0gbnVsbCApIHtcbiAgICAgICAgcmV0dXJuIHBhZ2VUaXRsZUVsZW1lbnQuaW5uZXJIVE1MXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9